## 仓储层使用事务的一种方式

### 思路：
### DB库
#### 1. Idbops接口实现
Idbops提供了常用的事务开启、提交、回滚方法，并返回一个包装过后的ctx。
每个DB提供方需要实现该接口，以支持对仓储层的事务控制。  
Idbops实现对象需要关心**如何开启事务**以及**如何将DB对象放进ctx中**。

#### 2.DB封装
封装一个UseXXXX结构体，内部有一个公共Ctx，并提供DB()方法，该方法返回一个DB对象，
可以是Gorm对象，Xorm对象或者任意可以和IdbOps配合的对象  
UserXXX对象**只关心如何从自己的Ctx中获取DB对象**。并在获取不到对象时生成一个可用的DB对象。

### 仓储层
### 1. 仓储接口
仓储层额外提供一个WithCtx()方法，用于传递Ctx

### 2. 仓储实现
仓储的具体实现对象，通过组合UserXXXX后拥有DB()方法 帮助方便地获取DB对象，
整个仓储层直接使用DB方法获取与数据库交互的对象，至于如何获取，
由DB()方法封装实现细节，以及是否要开启事务则由上层调用方控制Idbops组装ctx对象来决定。
仓储层获取的DB对象完全**由组合的UseXXX提供**

### 如何调用
参考domain/service/user.go中的Create方法